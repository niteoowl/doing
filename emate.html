<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMATE - ì˜ì–´ ë³¸ë¬¸ ì§‘ì¤‘ í•™ìŠµ (Scramble)</title>

    <style>
        /* í°íŠ¸: Pretendard ìŠ¤íƒ€ì¼ì„ ìœ„í•´ Noto Sans KRì˜ ê°€ë²¼ìš´ ì›¨ì´íŠ¸ ì‚¬ìš© */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        /* CSS ë³€ìˆ˜: ë‹¤í¬ ëª¨ë“œ */
        :root {
            --primary-color: #ffffff;
            --secondary-color: #bbbbbb;
            --background-color: #1a1a1a;
            --light-gray-bg: #2a2a2a;
            --darker-gray-bg: #3a3a3a;
            --border-color: #444444;
            --success-color: #10b981;
            --error-color: #dc2626;
            --warning-color: #f59e0b;
            --accent-color: #3b82f6; /* Blue for interaction */
            --transition-speed: 0.3s;
        }

        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            font-weight: 400;
            background-color: var(--background-color);
            color: var(--primary-color);
            margin: 0;
            padding: 0;
            line-height: 1.8;
            overflow-x: hidden;
        }

        #app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* í—¤ë” */
        .main-header {
            background-color: var(--background-color);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header-content {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }
        
        @media (min-width: 768px) {
            .header-content { flex-direction: row; }
        }
        
        .header-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .main-nav { display: flex; gap: 0.75rem; }

        .nav-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all var(--transition-speed) ease;
            border: 1px solid transparent;
            cursor: pointer;
            font-size: 0.875rem;
            box-shadow: none;
        }

        .nav-btn.active {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        .nav-btn:not(.active) {
            background-color: var(--light-gray-bg);
            color: var(--secondary-color);
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex-grow: 1;
            max-width: 1000px; 
            margin: 0 auto;
            width: 100%;
            padding: 2rem 1rem;
        }

        .app-card { background-color: transparent; padding: 0; margin-bottom: 2rem; border: none; }

        .mode-btn-group { display: flex; flex-wrap: wrap; gap: 0.75rem; }

        .mode-btn {
            font-weight: 600;
            padding: 0.6rem 1.4rem;
            border-radius: 9999px;
            transition: all var(--transition-speed) ease;
            border: none;
            cursor: pointer;
            flex-shrink: 0;
            font-size: 0.9rem;
            box-shadow: none;
        }

        .mode-btn.active {
            background-color: var(--primary-color);
            color: var(--background-color);
        }
        
        .mode-btn:not(.active) {
            background-color: var(--light-gray-bg);
            color: var(--secondary-color);
        }

        /* HWP ìŠ¤íƒ€ì¼ ì„¹ì…˜ êµ¬ë¶„ì„  */
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 3px double var(--primary-color);
        }

        #content-area { background-color: transparent; padding: 0; min-height: 400px; border: none; }

        /* --- 1ë‹¨ê³„: ì •ë… í•™ìŠµ (Study Mode) --- */
        .study-item {
            padding: 1.5rem 0;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
            background-color: transparent;
        }
        
        .study-item .en-text {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .study-item .kr-text {
            font-size: 1rem;
            color: var(--secondary-color);
            font-style: italic;
            margin-bottom: 1rem;
        }
        
        .detail-point {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid var(--border-color);
            background-color: var(--light-gray-bg);
            color: var(--secondary-color);
            font-size: 0.9rem;
            transition: max-height var(--transition-speed) ease-in-out, opacity var(--transition-speed) ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            border-radius: 0.5rem;
        }
        
        .detail-point.visible {
            max-height: 500px;
            opacity: 1;
        }
        
        .point-type {
            font-weight: 700; 
            color: var(--primary-color);
            margin-right: 0.5rem;
            display: inline-block;
            min-width: 90px;
        }

        .vocab-list {
            margin-top: 0.5rem;
            list-style: none;
            padding: 0;
        }
        .vocab-list li {
            margin-bottom: 0.5rem;
            padding-left: 10px;
            position: relative;
        }
        .vocab-list li::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--warning-color);
        }
        .vocab-word { font-weight: 700; color: var(--warning-color); margin-right: 0.5rem; }
        .vocab-example { font-style: italic; color: var(--secondary-color); margin-left: 0.5rem; }

        /* --- 2ë‹¨ê³„: ìˆœì„œ ë§ì¶”ê¸° (Scramble Mode) --- */
        .scramble-container {
            background-color: var(--light-gray-bg);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }
        .kr-prompt-scramble {
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--secondary-color);
            margin-bottom: 1rem;
            font-style: italic;
        }
        .scramble-result {
            min-height: 4rem;
            border: 2px dashed var(--secondary-color);
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            background-color: var(--background-color);
            align-items: center;
            transition: border-color var(--transition-speed) ease;
        }
        .scramble-result.correct { border-color: var(--success-color); }
        .scramble-result.incorrect { border-color: var(--error-color); }

        .scramble-words {
            min-height: 3rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.75rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            background-color: var(--darker-gray-bg);
            align-items: center;
        }

        .word-token {
            padding: 0.5rem 0.75rem;
            background-color: var(--accent-color);
            color: var(--primary-color);
            border: none;
            border-radius: 0.3rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .word-token:hover { background-color: #60a5fa; transform: translateY(-1px); }
        .word-token.result-token { background-color: var(--darker-gray-bg); color: var(--primary-color); box-shadow: none; border: 1px solid var(--border-color);}
        .word-token.result-token:hover { background-color: var(--darker-gray-bg); transform: none; }
        .word-token.correct { background-color: var(--success-color); }

        /* --- 3ë‹¨ê³„: ìµœì¢… íƒ€ì´í•‘ (Drill Mode) --- */
        .drill-card {
            background-color: var(--light-gray-bg);
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
        }

        #user-input-drill {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            resize: none;
            height: 6rem;
            transition: border-color var(--transition-speed) ease;
            font-size: 1.1rem;
            background-color: var(--background-color);
            color: var(--primary-color);
        }
        
        .drill-buttons { display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem; }
        @media (min-width: 640px) { .drill-buttons { flex-direction: row; } }
        
        .action-btn {
            flex-grow: 1;
            padding: 1rem;
            border-radius: 0.5rem;
            font-weight: 700;
            transition: background-color var(--transition-speed) ease;
            border: none;
            cursor: pointer;
            box-shadow: none;
        }
        
        #check-btn-drill { background-color: var(--primary-color); color: var(--background-color); }
        #hint-btn-drill { background-color: var(--secondary-color); color: var(--background-color); }

        .text-success { color: var(--success-color); }
        .text-error { color: var(--error-color); }
        .text-warning { color: var(--warning-color); }

    </style>
</head>
<body>

    <div id="app">
        
        <!-- í—¤ë”: EMATE -->
        <header class="main-header">
            <div class="header-content">
                <h1 class="header-title">EMATE</h1>
                <nav class="main-nav">
                    <button onclick="loadLesson('lesson5')" id="btn-lesson5" class="nav-btn active">Lesson 5</button>
                    <button onclick="loadLesson('lesson6')" id="btn-lesson6" class="nav-btn">Lesson 6</button>
                </nav>
            </div>
        </header>

        <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
        <main class="main-content">

            <!-- ì œëª© ë° MDR ëª¨ë“œ ì„ íƒ -->
            <div class="app-card">
                <h2 id="lesson-title" class="section-title">Lesson 5: meet the new world (ìƒˆë¡œìš´ ì„¸ìƒì„ ë§Œë‚˜ë‹¤)</h2>
                
                <div class="mode-btn-group">
                    <button onclick="setMode('study')" id="btn-study" class="mode-btn active">
                        1ë‹¨ê³„: ì •ë… í•™ìŠµ
                    </button>
                    <button onclick="setMode('scramble')" id="btn-scramble" class="mode-btn">
                        2ë‹¨ê³„: ìˆœì„œ ë§ì¶”ê¸° (Scramble)
                    </button>
                    <button onclick="setMode('drill')" id="btn-drill" class="mode-btn">
                        3ë‹¨ê³„: ìµœì¢… íƒ€ì´í•‘
                    </button>
                </div>
                <p style="font-size: 0.875rem; margin-top: 0.75rem; color: var(--secondary-color);">í•™ìŠµ ë‹¨ê³„ë¥¼ ë°Ÿìœ¼ë©° ì™„ë²½í•˜ê²Œ ë³¸ë¬¸ì„ ì•”ê¸°í•´ ë³´ì„¸ìš”.</p>
            </div>

            <!-- MDR ì½˜í…ì¸  ì˜ì—­ -->
            <div id="content-area">
                <!-- ëª¨ë“œì— ë”°ë¼ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
            </div>
            
        </main>
    </div>

    <script>
        // DOM ìš”ì†Œ í—¬í¼ í•¨ìˆ˜
        const $ = id => document.getElementById(id);
        const $qa = sel => document.querySelectorAll(sel);

        // ì „ì—­ ë³€ìˆ˜ ë° ë ˆìŠ¨ ë°ì´í„°
        let currentLessonId = 'lesson5';
        let currentMode = 'study'; 
        let currentScrambleIndex = 0; // Scramble ëª¨ë“œ ì¸ë±ìŠ¤
        let currentDrillIndex = 0; // Drill ëª¨ë“œ ì¸ë±ìŠ¤
        
        // --- ë ˆìŠ¨ ë°ì´í„° (ì–´íœ˜/í¬ì¸íŠ¸ ê°•í™”) ---
        const lessons = {
            'lesson5': {
                title: "Lesson 5: meet the new world (ìƒˆë¡œìš´ ì„¸ìƒì„ ë§Œë‚˜ë‹¤)",
                data: [
                    { en: "Hi! Iâ€™m Hyunsu. Last summer, my friends and I made our own adventure game, â€œThe Lost Island.â€", kr: "ì•ˆë…•! ë‚˜ëŠ” í˜„ìˆ˜ì•¼. ì§€ë‚œ ì—¬ë¦„ì—, ë‚´ ì¹œêµ¬ë“¤ê³¼ ë‚˜ëŠ” ìš°ë¦¬ë§Œì˜ ì–´ë“œë²¤ì²˜ ê²Œì„, 'ë” ë¡œìŠ¤íŠ¸ ì•„ì¼ëœë“œ'ë¥¼ ë§Œë“¤ì—ˆì–´.", grammar: "I'm, my friends and I(ì£¼ì–´), made(ë™ì‚¬), 'The Lost Island'(ëª©ì ë³´ì–´). madeëŠ” 'ë§Œë“¤ë‹¤' ì™¸ì— 'ëª…ëª…í•˜ë‹¤'ëŠ” 5í˜•ì‹ ìš©ë²•ìœ¼ë¡œ ì“°ì„.", testPoint: "ì£¼ì–´ë¶€(friends and I)ì™€ ë™ì‚¬(made)ì˜ ì‹œì œ ì¼ì¹˜ (ê³¼ê±°). ëª©ì ë³´ì–´ê°€ ê²Œì„ ì œëª©ì¸ ì  í™•ì¸.",
                      vocab: [ { word: "adventure", meaning: "ëª…ì‚¬: ëª¨í—˜", example: "He loves thrilling adventures." }, { word: "our own", meaning: "ìš°ë¦¬ ìì‹ ì˜, ìš°ë¦¬ë§Œì˜ (ì†Œìœ ê²© + own)", example: "We built our own house." } ]
                    },
                    { en: "We worked together as a team.", kr: "ìš°ë¦¬ëŠ” íŒ€ìœ¼ë¡œì„œ í•¨ê»˜ ì¼í–ˆì–´.", grammar: "work together as a team: 'íŒ€ìœ¼ë¡œ í•¨ê»˜ ì¼í•˜ë‹¤' (asëŠ” ìê²©/ì—­í• )", testPoint: "asì˜ ì—­í• (ìê²©) ì•”ê¸°. 'Aë¡œì„œ'ë¼ëŠ” ëœ»ì„ ê¸°ì–µ.",
                      vocab: [ { word: "as", meaning: "ì „ì¹˜ì‚¬: ~ë¡œì„œ, ~ì²˜ëŸ¼ (ìê²©/ì—­í• ì„ ë‚˜íƒ€ëƒ„)", example: "He works as a teacher." }, { word: "together", meaning: "ë¶€ì‚¬: í•¨ê»˜, ê°™ì´", example: "Let's work together on this project." } ]
                    },
                    { en: "STEP 1: Story-making", kr: "1ë‹¨ê³„: ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°", grammar: null, testPoint: null, vocab: [] },
                    { en: "First, I wrote a story.", kr: "ë¨¼ì €, ë‚˜ëŠ” ì´ì•¼ê¸°ë¥¼ ì¼ì–´.", grammar: "write-wrote-written (3ë‹¨ ë³€í™” ìˆ™ì§€)", testPoint: "ë¶€ì‚¬ Firstë¡œ ë¬¸ì¥ì˜ ì‹œì‘ì„ ì•Œë¦¼.",
                      vocab: [ { word: "First", meaning: "ë¶€ì‚¬: ë¨¼ì €, ì²«ì§¸ë¡œ (ë¬¸ì¥ ì•ì—ì„œ ìˆœì„œë¥¼ ë‚˜íƒ€ëƒ„)", example: "First, let me explain the rules." } ]
                    },
                    { en: "The story begins like this:", kr: "ì´ì•¼ê¸°ëŠ” ì´ë ‡ê²Œ ì‹œì‘ë¼:", grammar: "begin-began-begun, like this: 'ì´ì™€ ê°™ì´'", testPoint: "like (ì „ì¹˜ì‚¬) + this (ëŒ€ëª…ì‚¬). begins (3ì¸ì¹­ ë‹¨ìˆ˜ ë™ì‚¬).",
                      vocab: [ { word: "begins", meaning: "ë™ì‚¬: ì‹œì‘í•˜ë‹¤ (ì£¼ì–´ The storyê°€ 3ì¸ì¹­ ë‹¨ìˆ˜ì´ë¯€ë¡œ -sê°€ ë¶™ìŒ)", example: "The class begins at nine." }, { word: "like this", meaning: "ì´ì™€ ê°™ì´, ì´ëŸ° ì‹ìœ¼ë¡œ", example: "Please do it like this." } ]
                    },
                    { en: "One day you wake up on an island.", kr: "ì–´ëŠ ë‚  ë„ˆëŠ” í•œ ì„¬ì—ì„œ ëˆˆì„ ë– .", grammar: "wake up: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ë‹¤'", testPoint: "on an island (ì„¬ ìœ„ì—ì„œ ê¹¨ì–´ë‚˜ë‹¤)ì˜ ì „ì¹˜ì‚¬ on ì‚¬ìš©.",
                      vocab: [ { word: "wake up", meaning: "ë™ì‚¬êµ¬: ì ì—ì„œ ê¹¨ì–´ë‚˜ë‹¤ (í˜„ì¬ ì‹œì œë¡œ ê²Œì„ ìƒí™© ë¬˜ì‚¬)", example: "I usually wake up early." }, { word: "island", meaning: "ëª…ì‚¬: ì„¬ (Sê°€ ë¬µìŒ)", example: "Jeju is a beautiful island." } ]
                    },
                    { en: "There are many monsters on the island.", kr: "ê·¸ ì„¬ì—ëŠ” ëª¬ìŠ¤í„°ë“¤ì´ ë§ì•„.", grammar: "There are + ë³µìˆ˜ëª…ì‚¬: '~ë“¤ì´ ìˆë‹¤'", testPoint: "There are êµ¬ë¬¸ ì•”ê¸°. many monsters (ë³µìˆ˜).", vocab: [] },
                    { en: "You go through a high mountain, a long river, and a giant tower.", kr: "ë„ˆëŠ” ë†’ì€ ì‚°, ê¸´ ê°•, ê·¸ë¦¬ê³  ê±°ëŒ€í•œ íƒ‘ì„ í†µê³¼í•´.", grammar: "go through: '~ì„ í†µê³¼í•˜ë‹¤'", testPoint: "a high mountain, a long river, a giant towerì˜ ë³‘ë ¬ êµ¬ì¡°. throughì˜ ì² ì ì£¼ì˜.",
                      vocab: [ { word: "go through", meaning: "ë™ì‚¬êµ¬: ~ì„ í†µê³¼í•˜ë‹¤, ê²ªë‹¤", example: "We have to go through the tunnel." }, { word: "giant", meaning: "í˜•ìš©ì‚¬: ê±°ëŒ€í•œ, ì—„ì²­ë‚˜ê²Œ í°", example: "They built a giant statue." } ]
                    },
                    { en: "Choose five items and get off the island.", kr: "ì•„ì´í…œ ë‹¤ì„¯ ê°œë¥¼ ì„ íƒí•´ì„œ ì„¬ì—ì„œ íƒˆì¶œí•´.", grammar: "Choose~ and get off~: ë™ì‚¬ì›í˜•ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª…ë ¹ë¬¸", testPoint: "get off: '~ì—ì„œ ë‚´ë¦¬ë‹¤/íƒˆì¶œí•˜ë‹¤' ìˆ™ì–´ ì•”ê¸°.",
                      vocab: [ { word: "items", meaning: "ëª…ì‚¬: í’ˆëª©, ì•„ì´í…œ", example: "Put the items in the basket." }, { word: "get off", meaning: "ë™ì‚¬êµ¬: (ì°¨/ë°° ë“±ì—ì„œ) ë‚´ë¦¬ë‹¤, (ì¥ì†Œì—ì„œ) ë²—ì–´ë‚˜ë‹¤", example: "He got off the bus." } ]
                    },
                    { en: "STEP 2: Building", kr: "2ë‹¨ê³„: êµ¬ì¶•í•˜ê¸°", grammar: null, testPoint: null, vocab: [] },
                    { en: "Sujin made the background music and monster sounds.", kr: "ìˆ˜ì§„ì´ëŠ” ë°°ê²½ìŒì•…ê³¼ ëª¬ìŠ¤í„° ì†Œë¦¬ë¥¼ ë§Œë“¤ì—ˆì–´.", grammar: "background music: ë°°ê²½ ìŒì•… (ë³µí•© ëª…ì‚¬)", testPoint: "madeì˜ ê³¼ê±° ì‹œì œì™€ the ì‚¬ìš© í™•ì¸.",
                      vocab: [ { word: "background music", meaning: "ë°°ê²½ìŒì•… (BGM)", example: "The movie has great background music." }, { word: "sounds", meaning: "ëª…ì‚¬: ì†Œë¦¬ë“¤ (ë³µìˆ˜)", example: "I heard strange sounds." } ]
                    },
                    { en: "Jean drew the main character and NPCs.", kr: "ì§„ì€ ì£¼ì¸ê³µê³¼ NPCë“¤ì„ ê·¸ë ¸ì–´.", grammar: "drew: drawì˜ ê³¼ê±°í˜•, NPC: Non-Player Character (ê²Œì„ ìš©ì–´)", testPoint: "drewì˜ ì² ìì™€ ë°œìŒ ì£¼ì˜.",
                      vocab: [ { word: "drew", meaning: "ë™ì‚¬: ê·¸ë¦¬ë‹¤ (drawì˜ ê³¼ê±°í˜•)", example: "She drew a picture yesterday." }, { word: "NPCs", meaning: "Non-Player Characters (ë¹„ í”Œë ˆì´ì–´ ìºë¦­í„°)", example: "NPCs give you missions in the game." } ]
                    },
                    { en: "Every character looked real.", kr: "ëª¨ë“  ìºë¦­í„°ê°€ ì§„ì§œì²˜ëŸ¼ ë³´ì˜€ì–´.", grammar: "Every + ë‹¨ìˆ˜ ëª…ì‚¬ + ë‹¨ìˆ˜ ë™ì‚¬. look + í˜•ìš©ì‚¬: '~ì²˜ëŸ¼ ë³´ì´ë‹¤'", testPoint: "Every character (ë‹¨ìˆ˜)ì™€ looked real (í˜•ìš©ì‚¬ ë³´ì–´)ì˜ ì—°ê²°.",
                      vocab: [ { word: "Every", meaning: "í˜•ìš©ì‚¬: ëª¨ë“  (ë‹¨ìˆ˜ ëª…ì‚¬ì™€ í•¨ê»˜ ì“°ì—¬ ë‹¨ìˆ˜ ì·¨ê¸‰)", example: "Every student must attend." }, { word: "real", meaning: "í˜•ìš©ì‚¬: ì§„ì§œì˜, ì‹¤ì œì˜ (lookì˜ ë³´ì–´ë¡œ ì‚¬ìš©)", example: "The flowers look real." } ]
                    },
                    { en: "Minwoo coded the game.", kr: "ë¯¼ìš°ëŠ” ê²Œì„ì„ ì½”ë”©í–ˆì–´.", grammar: "coded: codeì˜ ê³¼ê±°í˜•", testPoint: "codedì˜ ê³¼ê±°í˜• ì² ì ì£¼ì˜.", vocab: [] },
                    { en: "He put all the parts together.", kr: "ê·¸ëŠ” ëª¨ë“  ìš”ì†Œë“¤ì„ í•˜ë‚˜ë¡œ í•©ì³¤ì–´.", grammar: "put together: '~ì„ í•©ì¹˜ë‹¤/ëª¨ìœ¼ë‹¤'. putì€ ê³¼ê±°í˜•ë„ put.", testPoint: "put ~ togetherì˜ ìˆ™ì–´ ì•”ê¸°.",
                      vocab: [ { word: "put together", meaning: "ë™ì‚¬êµ¬: ~ì„ ì¡°ë¦½í•˜ë‹¤, í•©ì¹˜ë‹¤ (putì˜ 3ë‹¨ ë³€í™”ëŠ” put-put-put)", example: "He put the puzzle together." }, { word: "parts", meaning: "ëª…ì‚¬: ë¶€ë¶„, ìš”ì†Œ", example: "We need all the parts." } ]
                    },
                    { en: "Sounds, characters, and a story were in the game.", kr: "ì†Œë¦¬, ìºë¦­í„°, ê·¸ë¦¬ê³  ì´ì•¼ê¸°ê°€ ê²Œì„ ì•ˆì— ìˆì—ˆì–´.", grammar: "A, B, and C (ë³µìˆ˜ ì£¼ì–´) + were(ë³µìˆ˜ ë™ì‚¬)", testPoint: "ë³µìˆ˜ ì£¼ì–´ì— ë”°ë¥¸ were ì‚¬ìš© í™•ì¸.", vocab: [] },
                    { en: "Our game looked and sounded good.", kr: "ìš°ë¦¬ ê²Œì„ì€ ë³´ê¸°ì—ë„ ì¢‹ì•˜ê³  ì†Œë¦¬ë„ ë©‹ì¡Œì–´.", grammar: "look/sound + good: 2í˜•ì‹ ë™ì‚¬ + í˜•ìš©ì‚¬ ë³´ì–´", testPoint: "good (í˜•ìš©ì‚¬) ì‚¬ìš©.", vocab: [] },
                    { en: "STEP 3: Testing", kr: "3ë‹¨ê³„: í…ŒìŠ¤íŠ¸í•˜ê¸°", grammar: null, testPoint: null, vocab: [] },
                    { en: "Sumin played the game many times.", kr: "ìˆ˜ë¯¼ì´ëŠ” ê²Œì„ì„ ì—¬ëŸ¬ ë²ˆ í”Œë ˆì´í–ˆì–´.", grammar: "many times: 'ì—¬ëŸ¬ ë²ˆ'", testPoint: "many times (íšŸìˆ˜)ì˜ ìœ„ì¹˜ í™•ì¸.",
                      vocab: [ { word: "many times", meaning: "ë¶€ì‚¬êµ¬: ì—¬ëŸ¬ ë²ˆ, ìì£¼", example: "I have told you many times." } ]
                    },
                    { en: "Then she shared her ideas.", kr: "ê·¸ë¦¬ê³  ë‚˜ì„œ ê·¸ë…€ëŠ” ìì‹ ì˜ ì•„ì´ë””ì–´ë¥¼ ê³µìœ í–ˆì–´.", grammar: "share A with B: 'Aë¥¼ Bì™€ ê³µìœ í•˜ë‹¤' (ì—¬ê¸°ì„  with B ìƒëµ)", testPoint: "Then she shared (ê³¼ê±° ì‹œì œ).",
                      vocab: [ { word: "shared", meaning: "ë™ì‚¬: ê³µìœ í–ˆë‹¤ (shareì˜ ê³¼ê±°í˜•)", example: "She shared her lunch with me." } ]
                    },
                    { en: "She said, â€œI enjoyed playing the game. But it ends too soon.â€", kr: "ê·¸ë…€ëŠ” â€œê²Œì„í•˜ëŠ” ê²ƒì€ ì¦ê±°ì› ì–´. í•˜ì§€ë§Œ ë„ˆë¬´ ë¹¨ë¦¬ ëë‚˜.â€ë¼ê³  ë§í–ˆì–´.", grammar: "enjoy + -ing (ë™ëª…ì‚¬). too soon: 'ë„ˆë¬´ ì¼ì°/ë¹¨ë¦¬'", testPoint: "enjoy playing (ë™ëª…ì‚¬). ends (3ì¸ì¹­ ë‹¨ìˆ˜) ì£¼ì˜.",
                      vocab: [ { word: "enjoyed", meaning: "ë™ì‚¬: ì¦ê²¼ë‹¤ (enjoyëŠ” ë’¤ì— ë™ëª…ì‚¬(-ing)ë¥¼ ëª©ì ì–´ë¡œ ì·¨í•¨)", example: "We enjoyed hiking." }, { word: "too soon", meaning: "ë¶€ì‚¬êµ¬: ë„ˆë¬´ ì¼ì°/ë¹¨ë¦¬", example: "Don't leave too soon." } ]
                    },
                    { en: "â€œIt needs one more stage. And add more items like a life jacket.â€", kr: "â€œìŠ¤í…Œì´ì§€ í•˜ë‚˜ê°€ ë” í•„ìš”í•´. ê·¸ë¦¬ê³  êµ¬ëª…ì¡°ë¼ ê°™ì€ ì•„ì´í…œë“¤ì„ ë” ì¶”ê°€í•´.â€", grammar: "one more stage (ë‹¨ìˆ˜), more items (ë³µìˆ˜). like: '~ê°™ì€'", testPoint: "needs (3ì¸ì¹­ ë‹¨ìˆ˜). add more items (ëª…ë ¹ë¬¸).",
                      vocab: [ { word: "needs", meaning: "ë™ì‚¬: í•„ìš”í•˜ë‹¤ (ì£¼ì–´ Itì´ 3ì¸ì¹­ ë‹¨ìˆ˜ì´ë¯€ë¡œ -sê°€ ë¶™ìŒ)", example: "He needs a pen." }, { word: "like", meaning: "ì „ì¹˜ì‚¬: ~ì²˜ëŸ¼, ~ê°™ì€", example: "Items like this are useful." } ]
                    },
                    { en: "So we added an ice lake stage and more useful items.", kr: "ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì–¼ìŒ í˜¸ìˆ˜ ìŠ¤í…Œì´ì§€ì™€ ë” ìœ ìš©í•œ ì•„ì´í…œë“¤ì„ ì¶”ê°€í–ˆì–´.", grammar: "added: addì˜ ê³¼ê±°í˜•", testPoint: "So (ê·¸ë˜ì„œ)ì˜ ì“°ì„. more useful items (ë¹„êµê¸‰ useful).",
                      vocab: [ { word: "So", meaning: "ì ‘ì†ì‚¬: ê·¸ë˜ì„œ, ê·¸ëŸ¬ë¯€ë¡œ (ê²°ê³¼ë¥¼ ë‚˜íƒ€ëƒ„)", example: "It was raining, so I took an umbrella." }, { word: "useful", meaning: "í˜•ìš©ì‚¬: ìœ ìš©í•œ, ì“¸ëª¨ ìˆëŠ”", example: "That tool is very useful." } ]
                    },
                    { en: "Now our game looked great.", kr: "ì´ì œ ìš°ë¦¬ ê²Œì„ì€ í›¨ì”¬ ë©‹ì ¸ ë³´ì˜€ì–´.", grammar: "great: goodì˜ ê°•ì¡°í˜•. look + í˜•ìš©ì‚¬", testPoint: "looked great (ê°ê° ë™ì‚¬ + í˜•ìš©ì‚¬).", vocab: [] },
                    { en: "STEP 4: Publishing", kr: "4ë‹¨ê³„: ì¶œì‹œí•˜ê¸°", grammar: null, testPoint: null, vocab: [] },
                    { en: "We finally published the game on the app market.", kr: "ìš°ë¦¬ëŠ” ë§ˆì¹¨ë‚´ ì•± ë§ˆì¼“ì— ê·¸ ê²Œì„ì„ ì¶œì‹œí–ˆì–´.", grammar: "publish: 'ì¶œíŒí•˜ë‹¤, ì¶œì‹œí•˜ë‹¤'", testPoint: "finally (ë§ˆì¹¨ë‚´)ì˜ ìœ„ì¹˜. on the app market (ì „ì¹˜ì‚¬ on).",
                      vocab: [ { word: "finally", meaning: "ë¶€ì‚¬: ë§ˆì¹¨ë‚´, ë“œë””ì–´", example: "He finally arrived." }, { word: "published", meaning: "ë™ì‚¬: ì¶œíŒ/ì¶œì‹œí–ˆë‹¤ (publishì˜ ê³¼ê±°í˜•)", example: "The book was published last year." } ]
                    },
                    { en: "We got a lot of reviews!", kr: "ìš°ë¦¬ëŠ” ë§ì€ ë¦¬ë·°ë¥¼ ë°›ì•˜ì–´!", grammar: "a lot of: 'ë§ì€' (ì…€ ìˆ˜ ìˆëŠ” ëª…ì‚¬, ì…€ ìˆ˜ ì—†ëŠ” ëª…ì‚¬ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥)", testPoint: "a lot of reviews (ë³µìˆ˜).",
                      vocab: [ { word: "a lot of", meaning: "ë§ì€ ìˆ˜ì˜/ì–‘ì˜", example: "She has a lot of friends." }, { word: "reviews", meaning: "ëª…ì‚¬: ë¦¬ë·°, í›„ê¸°", example: "The product got good reviews." } ]
                    },
                    { en: "Making a game was hard, but we did it together as a team.", kr: "ê²Œì„ì„ ë§Œë“œëŠ” ê²ƒì€ í˜ë“¤ì—ˆì§€ë§Œ, ìš°ë¦¬ëŠ” íŒ€ìœ¼ë¡œì„œ ê·¸ê²ƒì„ í•¨ê»˜ í•´ëƒˆì–´.", grammar: "Making a game: ë™ëª…ì‚¬ ì£¼ì–´ (ë‹¨ìˆ˜ ì·¨ê¸‰) + was. do it together as a team: 'íŒ€ìœ¼ë¡œì„œ í•¨ê»˜ í•´ë‚´ë‹¤'", testPoint: "ë™ëª…ì‚¬ ì£¼ì–´ (Making a game)ì— ë”°ë¥¸ ë‹¨ìˆ˜ ë™ì‚¬ (was) ì‚¬ìš©.",
                      vocab: [ { word: "Making", meaning: "ë™ëª…ì‚¬: ë§Œë“œëŠ” ê²ƒ (ë¬¸ì¥ì˜ ì£¼ì–´ ì—­í• , ë‹¨ìˆ˜ ì·¨ê¸‰)", example: "Reading books is fun." } ]
                    },
                ]
            },
            'lesson6': {
                title: "Lesson 6: walk around the world (ì„¸ê³„ ê³³ê³³ì„ ê±·ë‹¤)",
                data: [
                    { en: "My Summer Days in Alaska", kr: "ì•Œë˜ìŠ¤ì¹´ì—ì„œì˜ ë‚˜ì˜ ì—¬ë¦„ë‚ ë“¤", grammar: "in Alaska: ì•Œë˜ìŠ¤ì¹´ì—ì„œ (ì¥ì†Œ ì „ì¹˜ì‚¬ in)", testPoint: "My Summer Days (ë³µìˆ˜) ì‚¬ìš© í™•ì¸.", vocab: [] },
                    { en: "9:00 p.m.", kr: "ì˜¤í›„ 9ì‹œ", grammar: null, testPoint: "p.m. (ì˜¤í›„) ì•½ì ìˆ™ì§€.", vocab: [] },
                    { en: "Last summer, I visited my uncle in Alaska.", kr: "ì§€ë‚œ ì—¬ë¦„, ë‚˜ëŠ” ì•Œë˜ìŠ¤ì¹´ì— ìˆëŠ” ì‚¼ì´Œì„ ë°©ë¬¸í–ˆë‹¤.", grammar: "visited: visitì˜ ê³¼ê±°í˜•", testPoint: "Last summer (ê³¼ê±° ì‹œì )ì— ë”°ë¥¸ ê³¼ê±° ë™ì‚¬ visited ì‚¬ìš©.",
                      vocab: [ { word: "visited", meaning: "ë™ì‚¬: ë°©ë¬¸í–ˆë‹¤ (visitì˜ ê³¼ê±°í˜•)", example: "I visited my grandparents last week." }, { word: "uncle", meaning: "ëª…ì‚¬: ì‚¼ì´Œ, ì™¸ì‚¼ì´Œ", example: "My uncle is a pilot." } ]
                    },
                    { en: "Can you guess the time in the picture?", kr: "ì‚¬ì§„ ì† ì‹œê°„ì´ ëª‡ ì‹œì¸ì§€ ë§í ìˆ˜ ìˆë‹ˆ?", grammar: "Can you guess~?: '~ì„ ì¶”ì¸¡í•  ìˆ˜ ìˆë‹ˆ?'", testPoint: "in the picture (ì „ì¹˜ì‚¬ in).",
                      vocab: [ { word: "guess", meaning: "ë™ì‚¬: ì¶”ì¸¡í•˜ë‹¤, ì§ì‘í•˜ë‹¤", example: "Can you guess my age?" }, { word: "in the picture", meaning: "ì‚¬ì§„ ì†ì—ì„œ", example: "Who is the person in the picture?" } ]
                    },
                    { en: "It was actually 9 p.m.", kr: "ì‚¬ì‹¤ì€ ì˜¤í›„ 9ì‹œì˜€ë‹¤.", grammar: "actually: 'ì‹¤ì œë¡œ, ì‚¬ì‹¤ì€'", testPoint: "actuallyì˜ ìœ„ì¹˜ ë° ì˜ë¯¸ ì•”ê¸°.",
                      vocab: [ { word: "actually", meaning: "ë¶€ì‚¬: ì‹¤ì œë¡œ, ì‚¬ì‹¤ì€ (ë¬¸ì¥ ì¤‘ê°„ì´ë‚˜ ëì— ìœ„ì¹˜í•˜ì—¬ ì‚¬ì‹¤ì„ ê°•ì¡°)", example: "He is actually a good singer." } ]
                    },
                    { en: "My uncle said, â€œThe sun doesnâ€™t set from May to July.", kr: "ì‚¼ì´Œì€ â€œ5ì›”ë¶€í„° 7ì›”ê¹Œì§€ëŠ” í•´ê°€ ì§€ì§€ ì•Šì•„.â€ë¼ê³  ë§ì”€í•˜ì…¨ë‹¤.", grammar: "doesn't set: 3ì¸ì¹­ ë‹¨ìˆ˜ ì£¼ì–´(sun)ì˜ ë¶€ì •ë¬¸. from A to B: 'Aë¶€í„° Bê¹Œì§€'", testPoint: "doesn't set (í˜„ì¬ ì‹œì œ)ì™€ from A to B êµ¬ë¬¸ ì•”ê¸°.",
                      vocab: [ { word: "set", meaning: "ë™ì‚¬: (í•´ë‚˜ ë‹¬ì´) ì§€ë‹¤", example: "The sun sets in the west." }, { word: "from A to B", meaning: "~ë¶€í„° ~ê¹Œì§€ (ê¸°ê°„ì´ë‚˜ ë²”ìœ„ë¥¼ ë‚˜íƒ€ëƒ„)", example: "The store is open from 9 to 5." } ]
                    },
                    { en: "So Alaska is â€˜The Land of the Midnight Sun.â€™â€", kr: "ê·¸ë˜ì„œ ì•Œë˜ìŠ¤ì¹´ëŠ” â€˜ë°±ì•¼ì˜ ë•…(The Land of the Midnight Sun)â€™ì´ì•¼.", grammar: "So: 'ê·¸ë˜ì„œ' (ê²°ê³¼)", testPoint: "â€˜The Land of the Midnight Sunâ€™ì˜ ê³ ìœ  ëª…ì‚¬ í‘œê¸°.",
                      vocab: [ { word: "Midnight Sun", meaning: "ë°±ì•¼ (ê·¹ì§€ë°©ì—ì„œ ì—¬ë¦„ì— í•´ê°€ ì§€ì§€ ì•ŠëŠ” í˜„ìƒ)", example: "Alaska is famous for the Midnight Sun." } ]
                    },
                    { en: "One day, my uncle took me and my cousin, Jimmy, to the Alaska State Fair.", kr: "ì–´ëŠ ë‚ , ì‚¼ì´Œì€ ë‚˜ì™€ ì‚¬ì´Œ ì§€ë¯¸ë¥¼ ì•Œë˜ìŠ¤ì¹´ ì£¼ ë°•ëŒíšŒì— ë°ë ¤ê°”ë‹¤.", grammar: "take A to B: 'Aë¥¼ Bë¡œ ë°ë ¤ê°€ë‹¤'", testPoint: "took (takeì˜ ê³¼ê±°í˜•). JimmyëŠ” ë™ê²© ëª…ì‚¬êµ¬.",
                      vocab: [ { word: "took", meaning: "ë™ì‚¬: ë°ë ¤ê°”ë‹¤ (takeì˜ ê³¼ê±°í˜•)", example: "He took his dog for a walk." }, { word: "cousin", meaning: "ëª…ì‚¬: ì‚¬ì´Œ", example: "My cousin lives nearby." }, { word: "State Fair", meaning: "ì£¼ ë°•ëŒíšŒ", example: "We went to the State Fair in August." } ]
                    },
                    { en: "Jimmy signed up for the wood cutting game.", kr: "ì§€ë¯¸ëŠ” ë‚˜ë¬´ ìë¥´ê¸° ê²Œì„ì— ì°¸ê°€ ì‹ ì²­ì„ í–ˆë‹¤.", grammar: "sign up for: '~ì— ì°¸ê°€ ì‹ ì²­í•˜ë‹¤'", testPoint: "signed up for (ê³¼ê±° ì‹œì œ). wood cutting game (ë³µí•© ëª…ì‚¬).",
                      vocab: [ { word: "signed up for", meaning: "ë™ì‚¬êµ¬: ~ì— ë“±ë¡/ì‹ ì²­í•˜ë‹¤", example: "I signed up for the class." }, { word: "wood cutting", meaning: "ë‚˜ë¬´ ìë¥´ê¸° (ë³µí•© ëª…ì‚¬)", example: "Wood cutting is a difficult job." } ]
                    },
                    { en: "People started cutting the wood fast.", kr: "ì‚¬ëŒë“¤ì€ ë¹ ë¥´ê²Œ ë‚˜ë¬´ë¥¼ ìë¥´ê¸° ì‹œì‘í–ˆë‹¤.", grammar: "start + -ing (ë™ëª…ì‚¬) / to V (ë¶€ì •ì‚¬) ë‘˜ ë‹¤ ê°€ëŠ¥", testPoint: "fast (í˜•ìš©ì‚¬/ë¶€ì‚¬) ì‚¬ìš©.",
                      vocab: [ { word: "started", meaning: "ë™ì‚¬: ì‹œì‘í–ˆë‹¤ (startëŠ” ë’¤ì— to Vë‚˜ -ing ëª¨ë‘ ëª©ì ì–´ë¡œ ì·¨í•¨)", example: "She started to run." }, { word: "fast", meaning: "ë¶€ì‚¬: ë¹ ë¥´ê²Œ, ë¹¨ë¦¬ (í˜•ìš©ì‚¬/ë¶€ì‚¬ í˜•íƒœê°€ ê°™ìŒ)", example: "Run fast." } ]
                    },
                    { en: "I cheered for him, but he didnâ€™t get the prize.", kr: "ë‚˜ëŠ” ê·¸ë¥¼ ì‘ì›í–ˆì§€ë§Œ, ê·¸ëŠ” ìƒì„ ë°›ì§€ ëª»í–ˆë‹¤.", grammar: "cheered for: '~ì„ ì‘ì›í•˜ë‹¤'. didn't get: ê³¼ê±° ë¶€ì •ë¬¸", testPoint: "cheered for (ê³¼ê±° ì‹œì œ)ì™€ didn't get (ê³¼ê±° ë¶€ì •)ì˜ ì—°ê²°.",
                      vocab: [ { word: "cheered for", meaning: "ë™ì‚¬êµ¬: ~ì„ ì‘ì›í•˜ë‹¤", example: "The fans cheered for the team." }, { word: "prize", meaning: "ëª…ì‚¬: ìƒ, ìƒí’ˆ", example: "He won the first prize." } ]
                    },
                    { en: "â€œIt was hard. The wood was wet,â€ Jimmy said.", kr: "â€œí˜ë“¤ì—ˆì–´. ë‚˜ë¬´ê°€ ì –ì–´ ìˆì—ˆê±°ë“ ,â€ ì§€ë¯¸ê°€ ë§í–ˆë‹¤.", grammar: "hard (í˜•ìš©ì‚¬), wet (í˜•ìš©ì‚¬)", testPoint: "hardì™€ wetì˜ ëœ» ë° í’ˆì‚¬ í™•ì¸.",
                      vocab: [ { word: "hard", meaning: "í˜•ìš©ì‚¬: í˜ë“ , ì–´ë ¤ìš´", example: "The test was very hard." }, { word: "wet", meaning: "í˜•ìš©ì‚¬: ì –ì€, ì¶•ì¶•í•œ", example: "The floor is wet." } ]
                    },
                    { en: "We got hungry, so we went to the food court.", kr: "ìš°ë¦¬ëŠ” ë°°ê°€ ê³ íŒŒì ¸ì„œ, í‘¸ë“œì½”íŠ¸ë¡œ ê°”ë‹¤.", grammar: "get hungry: 'ë°°ê°€ ê³ íŒŒì§€ë‹¤' (ìƒíƒœ ë³€í™”). so: 'ê·¸ë˜ì„œ'", testPoint: "got hungry (ê³¼ê±° ì‹œì œ). so (ê²°ê³¼ ì ‘ì†ì‚¬) ì‚¬ìš©.",
                      vocab: [ { word: "got hungry", meaning: "ë°°ê°€ ê³ íŒŒì¡Œë‹¤ (get + í˜•ìš©ì‚¬: ~í•´ì§€ë‹¤)", example: "It got dark quickly." }, { word: "food court", meaning: "í‘¸ë“œì½”íŠ¸", example: "Let's meet at the food court." } ]
                    },
                    { en: "We had salmon sandwiches.", kr: "ìš°ë¦¬ëŠ” ì—°ì–´ ìƒŒë“œìœ„ì¹˜ë¥¼ ë¨¹ì—ˆë‹¤.", grammar: "had: haveì˜ ê³¼ê±°í˜•", testPoint: "salmon (ì—°ì–´) ë°œìŒ ë° ì² ì ì£¼ì˜.",
                      vocab: [ { word: "salmon", meaning: "ëª…ì‚¬: ì—°ì–´ (Lì´ ë¬µìŒ)", example: "Salmon is good for health." } ]
                    },
                    { en: "They were very new to me.", kr: "ê·¸ê²ƒë“¤ì€ ë‚˜ì—ê²Œ ë§¤ìš° ìƒì†Œí–ˆë‹¤.", grammar: "new to me: 'ë‚˜ì—ê²Œ ìƒˆë¡œìš´'", testPoint: "new to ~ (ì „ì¹˜ì‚¬ to) ì‚¬ìš©.",
                      vocab: [ { word: "new to me", meaning: "~ì—ê²Œ ìƒˆë¡œìš´/ìƒì†Œí•œ", example: "This culture is new to me." } ]
                    },
                    { en: "At home, I usually put ham and cheese in sandwiches, not salmon.", kr: "ì§‘ì—ì„œëŠ” ë³´í†µ ìƒŒë“œìœ„ì¹˜ì— ì—°ì–´ê°€ ì•„ë‹Œ í–„ê³¼ ì¹˜ì¦ˆë¥¼ ë„£ëŠ”ë‹¤.", grammar: "usually: 'ë³´í†µ' (ë¹ˆë„ ë¶€ì‚¬). not A but B: Aê°€ ì•„ë‹ˆë¼ B", testPoint: "usuallyì˜ ìœ„ì¹˜. not salmon (ëŒ€ë¹„ êµ¬ë¬¸).",
                      vocab: [ { word: "usually", meaning: "ë¶€ì‚¬: ë³´í†µ, ëŒ€ê°œ (ì¼ë°˜ ë™ì‚¬ ì•, be/ì¡°ë™ì‚¬ ë’¤ì— ìœ„ì¹˜)", example: "I usually read books." } ]
                    },
                    { en: "They were tasty because the salmon was so fresh.", kr: "ì—°ì–´ê°€ ë§¤ìš° ì‹ ì„ í–ˆê¸° ë•Œë¬¸ì— ê·¸ê²ƒë“¤ì€ ë§›ìˆì—ˆë‹¤.", grammar: "because: '~ë•Œë¬¸ì—' (ì´ìœ  ì ‘ì†ì‚¬). so fresh: 'ë§¤ìš° ì‹ ì„ í•œ'", testPoint: "because ì ˆ (ì´ìœ )ê³¼ ì£¼ì ˆ (ê²°ê³¼)ì˜ ì—°ê²°. so fresh (so + í˜•ìš©ì‚¬).",
                      vocab: [ { word: "tasty", meaning: "í˜•ìš©ì‚¬: ë§›ìˆëŠ”", example: "The soup is tasty." }, { word: "because", meaning: "ì ‘ì†ì‚¬: ~ ë•Œë¬¸ì— (ì´ìœ ë¥¼ ë‚˜íƒ€ëƒ„)", example: "I stayed home because it rained." }, { word: "fresh", meaning: "í˜•ìš©ì‚¬: ì‹ ì„ í•œ", example: "The vegetables are fresh." } ]
                    },
                    { en: "We, then, went to the Giant Vegetable Contest.", kr: "ê·¸ ë‹¤ìŒì—, ìš°ë¦¬ëŠ” ê±°ëŒ€ ì±„ì†Œ ëŒ€íšŒì— ê°”ë‹¤.", grammar: "then: 'ê·¸ ë‹¤ìŒì—'", testPoint: "thenì˜ ìœ„ì¹˜ ë° ì˜ë¯¸.",
                      vocab: [ { word: "then", meaning: "ë¶€ì‚¬: ê·¸ ë•Œ, ê·¸ ë‹¤ìŒì—", example: "First, wash your hands, then eat." }, { word: "Vegetable", meaning: "ëª…ì‚¬: ì±„ì†Œ", example: "Eat more vegetables." } ]
                    },
                    { en: "All the vegetables were huge!", kr: "ëª¨ë“  ì±„ì†Œë“¤ì´ ì •ë§ ê±°ëŒ€í–ˆë‹¤!", grammar: "All the vegetables (ë³µìˆ˜ ì£¼ì–´) + were (ë³µìˆ˜ ë™ì‚¬). huge (í˜•ìš©ì‚¬)", testPoint: "ë³µìˆ˜ ì£¼ì–´ were huge.",
                      vocab: [ { word: "huge", meaning: "í˜•ìš©ì‚¬: ê±°ëŒ€í•œ, ì—„ì²­ë‚˜ê²Œ í°", example: "The building is huge." } ]
                    },
                    { en: "My uncle entered the contest with his pumpkin.", kr: "ì‚¼ì´Œì€ ìì‹ ì˜ í˜¸ë°•ìœ¼ë¡œ ëŒ€íšŒì— ì°¸ê°€í–ˆë‹¤.", grammar: "enter the contest: 'ëŒ€íšŒì— ì°¸ê°€í•˜ë‹¤'", testPoint: "entered (ê³¼ê±° ì‹œì œ). with his pumpkin (ìˆ˜ë‹¨).",
                      vocab: [ { word: "entered", meaning: "ë™ì‚¬: ì°¸ê°€í–ˆë‹¤ (enterì˜ ê³¼ê±°í˜•)", example: "He entered the room." }, { word: "pumpkin", meaning: "ëª…ì‚¬: í˜¸ë°•", example: "We carve pumpkins for Halloween." } ]
                    },
                    { en: "It was bigger than a pig!", kr: "ê·¸ê²ƒì€ ë¼ì§€ë³´ë‹¤ë„ ë” ì»¸ë‹¤!", grammar: "bigger than A: 'Aë³´ë‹¤ ë” í°' (ë¹„êµê¸‰)", testPoint: "ë¹„êµê¸‰(bigger)ê³¼ than A êµ¬ë¬¸ ì•”ê¸°.",
                      vocab: [ { word: "bigger than", meaning: "~ë³´ë‹¤ ë” í° (ë¹„êµê¸‰)", example: "My car is bigger than yours." }, { word: "pig", meaning: "ëª…ì‚¬: ë¼ì§€", example: "The pig is in the mud." } ]
                    },
                    { en: "â€œThe crops get about 20 hours of sunlight a day during summer.", kr: "â€œì—¬ë¦„ì—ëŠ” ì‘ë¬¼ë“¤ì´ í•˜ë£¨ì— ì•½ 20ì‹œê°„ ë™ì•ˆ í–‡ë¹›ì„ ë°›ì•„.", grammar: "crops (ë³µìˆ˜ ì£¼ì–´) + get (ë³µìˆ˜ ë™ì‚¬). during summer: ì—¬ë¦„ ë™ì•ˆ (during + íŠ¹ì • ê¸°ê°„)", testPoint: "about 20 hours a day (ìˆ«ì í‘œí˜„). during summer (duringì˜ ìš©ë²•).",
                      vocab: [ { word: "crops", meaning: "ëª…ì‚¬: ë†ì‘ë¬¼ (ë³µìˆ˜)", example: "The farmer harvested the crops." }, { word: "sunlight", meaning: "ëª…ì‚¬: í–‡ë¹›", example: "Plants need sunlight to grow." }, { word: "during", meaning: "ì „ì¹˜ì‚¬: ~í•˜ëŠ” ë™ì•ˆ (íŠ¹ì • ê¸°ê°„)", example: "He slept during the flight." } ]
                    },
                    { en: "So they grow bigger and sweeter,â€ my uncle said.", kr: "ê·¸ë˜ì„œ ë” í¬ê³  ë‹¬ê²Œ ìë¼ëŠ” ê±°ì•¼,â€ ì‚¼ì´Œì´ ë§ì”€í•˜ì…¨ë‹¤.", grammar: "grow + ë¹„êµê¸‰ + and + ë¹„êµê¸‰: 'ì ì  ë” ~í•´ì§€ë‹¤'", testPoint: "grow bigger and sweeter (ë¹„êµê¸‰ ë³‘ë ¬ êµ¬ì¡°)ì™€ growì˜ 2í˜•ì‹ ìš©ë²•.",
                      vocab: [ { word: "grow", meaning: "ë™ì‚¬: ìë¼ë‹¤, ~í•´ì§€ë‹¤ (2í˜•ì‹ì—ì„œ ë³´ì–´ë¥¼ ì·¨í•¨)", example: "She is growing taller." }, { word: "sweeter", meaning: "í˜•ìš©ì‚¬: ë” ë‹¨ (sweetì˜ ë¹„êµê¸‰)", example: "This fruit is sweeter." } ] 
                    },
                    { en: "When we left the fair at 10 p.m., it was not so dark.", kr: "ìš°ë¦¬ê°€ ë°¤ 10ì‹œì— ë°•ëŒíšŒë¥¼ ë– ë‚  ë•Œë„, ê·¸ë ‡ê²Œ ì–´ë‘¡ì§€ ì•Šì•˜ë‹¤.", grammar: "When: '~í•  ë•Œ' (ì‹œê°„ ì ‘ì†ì‚¬). not so dark: 'ê·¸ë ‡ê²Œ ì–´ë‘¡ì§€ ì•Šì€'", testPoint: "When ì ˆì˜ ì‹œì œì™€ ì£¼ì ˆ ì‹œì œ ì¼ì¹˜ (ê³¼ê±°-ê³¼ê±°).",
                      vocab: [ { word: "left", meaning: "ë™ì‚¬: ë– ë‚¬ë‹¤ (leaveì˜ ê³¼ê±°í˜•)", example: "We left the party early." }, { word: "not so", meaning: "ê·¸ë ‡ê²Œ ~í•˜ì§€ ì•Šì€", example: "It was not so difficult." } ]
                    },
                    { en: "It was a fun day.", kr: "ì¦ê±°ìš´ í•˜ë£¨ì˜€ë‹¤.", grammar: "a fun day (ëª…ì‚¬ë¥¼ ìˆ˜ì‹í•˜ëŠ” í˜•ìš©ì‚¬ fun)", testPoint: "fun day (ì¬ë¯¸ìˆëŠ” í•˜ë£¨) í‘œí˜„ ì•”ê¸°.", vocab: [] },
                ]
            }
        };

        // --- í•µì‹¬ ê¸°ëŠ¥ ---

        /** í™œì„± í´ë˜ìŠ¤ë¥¼ í† ê¸€í•˜ëŠ” í—¬í¼ í•¨ìˆ˜ */
        const toggleActive = (selector, activeId) => {
            $qa(selector).forEach(btn => btn.classList.remove('active'));
            $(activeId)?.classList.add('active');
        };

        /** Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜ */
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        /** ì§€ì •ëœ ë ˆìŠ¨ì„ ë¡œë“œí•˜ê³  í˜„ì¬ ëª¨ë“œë¥¼ ë‹¤ì‹œ ì„¤ì •í•©ë‹ˆë‹¤. */
        function loadLesson(lessonId) {
            currentLessonId = lessonId;
            $('lesson-title').textContent = lessons[lessonId].title;
            toggleActive('.main-nav .nav-btn', `btn-${lessonId}`);
            setMode(currentMode);
        }

        /** MDR í•™ìŠµ ëª¨ë“œë¥¼ ì„¤ì •í•˜ê³  í•´ë‹¹ UIë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. */
        function setMode(mode) {
            currentMode = mode;
            toggleActive('.mode-btn-group .mode-btn', `btn-${mode}`);

            const contentArea = $('content-area');
            contentArea.innerHTML = '';
            
            const modeRenderers = {
                'study': renderStudyMode,
                'scramble': () => { currentScrambleIndex = 0; renderScrambleMode(contentArea); },
                'drill': () => { currentDrillIndex = 0; renderDrillMode(contentArea); },
            };

            modeRenderers[mode](contentArea);
        }

        // --- 1ë‹¨ê³„: ì •ë… í•™ìŠµ (Study Mode) ---

        /** ì •ë… í•™ìŠµ ëª¨ë“œ (ë¦¬ë”©ì±… ìŠ¤íƒ€ì¼) UIë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. */
        function renderStudyMode(container) {
            const lessonData = lessons[currentLessonId].data;

            let html = `
                <h3 class="section-title" style="margin-top: 0;">1ë‹¨ê³„: ì •ë… í•™ìŠµ (ì–´íœ˜, ë¬¸ë²•, ì‹œí—˜ í¬ì¸íŠ¸ ìƒì„¸ ë¶„ì„)</h3>
                <div style="margin-bottom: 1.5rem; display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem;">
                    <button id="toggle-points-btn" class="action-btn" onclick="toggleAllPoints()" style="background-color: var(--warning-color); color: var(--background-color); font-size: 0.9rem; flex-grow: 0;">
                        ëª¨ë“  ìƒì„¸ í¬ì¸íŠ¸ ë³´ì´ê¸°
                    </button>
                    <span style="font-size: 0.875rem; color: var(--secondary-color);">* í´ë¦­í•˜ì—¬ ê° ë¬¸ì¥ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì—´ê³  ë‹«ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
            `;

            lessonData.forEach((item, index) => {
                const points = [
                    { type: 'ë¬¸ë²• í¬ì¸íŠ¸', content: item.grammar },
                    { type: 'ì‹œí—˜ í¬ì¸íŠ¸', content: item.testPoint }
                ].filter(p => p.content);
                
                // ì–´íœ˜ ì„¹ì…˜ êµ¬ì„±
                let vocabHtml = '';
                if (item.vocab && item.vocab.length > 0) {
                    vocabHtml = `
                        <p style="margin-top: 1rem; font-weight: 700; color: var(--warning-color);">[ì–´íœ˜/í‘œí˜„ ì„¤ëª…]</p>
                        <ul class="vocab-list">
                            ${item.vocab.map(v => `
                                <li>
                                    <span class="vocab-word">${v.word}</span>: ${v.meaning}
                                    ${v.example ? `<span class="vocab-example">(${v.example})</span>` : ''}
                                </li>
                            `).join('')}
                        </ul>
                    `;
                }

                let pointsHtml = points.map(p => `
                    <div style="margin-top: 0.5rem;">
                        <span class="point-type">[${p.type}]</span>
                        <span>${p.content}</span>
                    </div>
                `).join('');
                
                const hasDetails = points.length > 0 || item.vocab.length > 0;
                const detailContent = vocabHtml + pointsHtml;

                html += `
                    <div class="study-item" onclick="togglePoint(${index})">
                        <p class="en-text">${item.en}</p>
                        <p class="kr-text">${item.kr}</p>
                        ${hasDetails ? 
                            `<div id="detail-point-${index}" class="detail-point">
                                ${detailContent}
                            </div>` : `<div style="font-size:0.9rem; color:var(--darker-gray-bg); padding-top:10px;"> (ì¶”ê°€ í¬ì¸íŠ¸ ì—†ìŒ) </div>`
                        }
                    </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        /** ê°œë³„ ë¬¸ì¥ì˜ ìƒì„¸ í¬ì¸íŠ¸ (ë¬¸ë²•, ì–´íœ˜ ë“±)ë¥¼ í† ê¸€í•©ë‹ˆë‹¤. */
        function togglePoint(index) {
            const pointEl = $(`detail-point-${index}`);
            if (pointEl) {
                pointEl.classList.toggle('visible');
            }
        }

        /** ëª¨ë“  ìƒì„¸ í¬ì¸íŠ¸ë¥¼ ë³´ì´ê±°ë‚˜ ìˆ¨ê¹ë‹ˆë‹¤. */
        function toggleAllPoints() {
            const allPoints = $qa('.detail-point');
            const toggleBtn = $('toggle-points-btn');

            let isAnyVisible = Array.from(allPoints).some(el => el.classList.contains('visible'));

            allPoints.forEach(el => {
                el.classList.toggle('visible', !isAnyVisible);
            });
            
            toggleBtn.textContent = !isAnyVisible ? 'ëª¨ë“  ìƒì„¸ í¬ì¸íŠ¸ ìˆ¨ê¸°ê¸°' : 'ëª¨ë“  ìƒì„¸ í¬ì¸íŠ¸ ë³´ì´ê¸°';
        }

        // --- 2ë‹¨ê³„: ìˆœì„œ ë§ì¶”ê¸° (Scramble Mode) ---

        /** ë¬¸ì¥ì„ ë‹¨ì–´ í† í°ìœ¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤. */
        const tokenizeForScramble = (text) => {
            // ë‹¨ì–´ (ì¶•ì•½, í•˜ì´í”ˆ í¬í•¨) ë˜ëŠ” ë‹¨ë… êµ¬ë‘ì ì„ ë¶„ë¦¬
            return text.match(/[\w'â€™-]+|[.,!?;:"()]/g) || [];
        };

        /** ë‹¨ì–´ í† í°ì„ í´ë¦­í•˜ì—¬ ì´ë™ì‹œí‚µë‹ˆë‹¤. */
        function moveToken(event, sourceId, targetId) {
            const token = event.target;
            const source = $(sourceId);
            const target = $(targetId);

            if (token.parentNode === source) {
                // Scramble Words -> Result
                token.classList.add('result-token');
                token.classList.remove('word-token');
                target.appendChild(token);
            } else if (token.parentNode === target) {
                // Result -> Scramble Words
                token.classList.add('word-token');
                token.classList.remove('result-token');
                source.appendChild(token);
            }
            // ìƒíƒœ ì´ˆê¸°í™”
            $(targetId).classList.remove('correct', 'incorrect');
            $('scramble-result-message').textContent = '';
        }

        /** ì •ë‹µì„ í™•ì¸í•©ë‹ˆë‹¤. */
        function checkScrambleAnswer(index) {
            const item = lessons[currentLessonId].data[index];
            const targetTokens = tokenizeForScramble(item.en);
            const resultArea = $(`scramble-result-${index}`);
            const placedTokens = Array.from(resultArea.querySelectorAll('.result-token'));
            const resultMsg = $('scramble-result-message');

            if (placedTokens.length !== targetTokens.length) {
                resultMsg.textContent = 'ì•„ì§ ëª¨ë“  ë‹¨ì–´ë¥¼ ë°°ì¹˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                resultMsg.className = 'text-warning';
                resultArea.classList.add('incorrect');
                resultArea.classList.remove('correct');
                return;
            }

            let allCorrect = true;
            for (let i = 0; i < targetTokens.length; i++) {
                // ëŒ€ì†Œë¬¸ì, êµ¬ë‘ì ê¹Œì§€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
                if (placedTokens[i].textContent.trim() !== targetTokens[i]) {
                    allCorrect = false;
                    break;
                }
            }

            if (allCorrect) {
                resultMsg.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.';
                resultMsg.className = 'text-success';
                resultArea.classList.add('correct');
                resultArea.classList.remove('incorrect');
                
                // ì •ë‹µ í† í° ë¹„í™œì„±í™” ë° ìƒ‰ìƒ ë³€ê²½
                placedTokens.forEach(token => {
                    token.classList.add('correct');
                    token.style.pointerEvents = 'none';
                });
                
                // ë‹¤ìŒ ë¬¸ì¥ ë¡œë“œ ë²„íŠ¼ í™œì„±í™”
                $('scramble-next-btn').style.display = 'inline-block';

            } else {
                resultMsg.textContent = 'ìˆœì„œê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ë³´ì„¸ìš”.';
                resultMsg.className = 'text-error';
                resultArea.classList.add('incorrect');
                resultArea.classList.remove('correct');
            }
        }
        
        /** ìˆœì„œ ë§ì¶”ê¸° ëª¨ë“œì˜ ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. */
        function loadNextScrambleItem() {
            currentScrambleIndex++;
            const data = lessons[currentLessonId].data;
            if (currentScrambleIndex < data.length) {
                renderScrambleContent($('scramble-container-wrapper'));
            } else {
                $('scramble-container-wrapper').innerHTML = `
                    <h3 class="text-success" style="font-size: 1.5rem; text-align: center; margin-top: 5rem;">
                        ëª¨ë“  ë¬¸ì¥ì˜ ìˆœì„œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤! ğŸ‰ <br> 3ë‹¨ê³„ ìµœì¢… íƒ€ì´í•‘ì„ ì§„í–‰í•´ ë³´ì„¸ìš”.
                    </h3>
                `;
                // ë²„íŠ¼ ìˆ¨ê¸°ê¸°
                $('scramble-check-btn').style.display = 'none';
                $('scramble-next-btn').style.display = 'none';
            }
        }

        /** ìˆœì„œ ë§ì¶”ê¸° ëª¨ë“œ UIë¥¼ ë Œë”ë§í•˜ê³  ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. */
        function renderScrambleMode(container) {
            container.innerHTML = `
                <h3 class="section-title">2ë‹¨ê³„: ìˆœì„œ ë§ì¶”ê¸° (Scramble)</h3>
                <p style="color: var(--secondary-color); margin-bottom: 1.5rem;">í•œêµ­ì–´ ëœ»ì„ ë³´ê³  ë‹¨ì–´ í† í°ì˜ ìˆœì„œë¥¼ í´ë¦­í•˜ì—¬ ë°°ì—´í•´ ë³´ì„¸ìš”.</p>
                
                <div id="scramble-status" style="margin-bottom: 1rem; font-size: 1.125rem; font-weight: 600; color: var(--secondary-color);"></div>

                <div id="scramble-container-wrapper">
                    <!-- ìŠ¤í¬ë¨ë¸” ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>

                <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                    <button id="scramble-check-btn" class="action-btn" onclick="checkScrambleAnswer(currentScrambleIndex)">
                        ì •ë‹µ í™•ì¸
                    </button>
                    <button id="scramble-next-btn" class="action-btn" onclick="loadNextScrambleItem()" style="display: none; background-color: var(--success-color); color: var(--background-color);">
                        ë‹¤ìŒ ë¬¸ì¥
                    </button>
                </div>
                <p id="scramble-result-message" style="margin-top: 1rem; font-size: 1.1rem; font-weight: 700;"></p>
            `;

            renderScrambleContent($('scramble-container-wrapper'));
        }
        
        /** ê°œë³„ ìŠ¤í¬ë¨ë¸” ë¬¸ì¥ ì½˜í…ì¸ ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. */
        function renderScrambleContent(wrapper) {
            const data = lessons[currentLessonId].data;
            const item = data[currentScrambleIndex];
            const targetTokens = tokenizeForScramble(item.en);
            const shuffledTokens = shuffleArray([...targetTokens]); // ë°°ì—´ ë³µì‚¬ í›„ ì…”í”Œ

            $('scramble-status').textContent = `ë¬¸ì¥ ${currentScrambleIndex + 1} / ${data.length}`;

            // HTML ìƒì„±
            wrapper.innerHTML = `
                <div class="scramble-container">
                    <p class="kr-prompt-scramble">(${item.kr})</p>
                    
                    <div id="scramble-result-${currentScrambleIndex}" class="scramble-result" 
                         onclick="event.target.classList.contains('result-token') ? moveToken(event, 'scramble-words-${currentScrambleIndex}', 'scramble-result-${currentScrambleIndex}') : null;">
                        <!-- ê²°ê³¼ ë‹¨ì–´ ë°°ì¹˜ ì˜ì—­ -->
                    </div>
                    
                    <div id="scramble-words-${currentScrambleIndex}" class="scramble-words"
                         onclick="event.target.classList.contains('word-token') ? moveToken(event, 'scramble-words-${currentScrambleIndex}', 'scramble-result-${currentScrambleIndex}') : null;">
                        ${shuffledTokens.map((token, i) => `
                            <button class="word-token" data-index="${i}">${token}</button>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
            $('scramble-check-btn').style.display = 'inline-block';
            $('scramble-next-btn').style.display = 'none';
            $('scramble-result-message').textContent = '';
        }

        // --- 3ë‹¨ê³„: ìµœì¢… íƒ€ì´í•‘ (Drill Mode) ---

        /** íƒ€ì´í•‘ ì—°ìŠµ ëª¨ë“œ UIë¥¼ ë Œë”ë§í•˜ê³  ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. */
        function renderDrillMode(container) {
            const data = lessons[currentLessonId].data;

            container.innerHTML = `
                <h3 class="section-title">3ë‹¨ê³„: ìµœì¢… íƒ€ì´í•‘ í…ŒìŠ¤íŠ¸</h3>
                <p style="color: var(--secondary-color); margin-bottom: 1.5rem;">ê°€ì¥ ì–´ë ¤ìš´ ìµœì¢… í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì™„ë²½í•œ ì˜ì–´ ë¬¸ì¥ì„ ì…ë ¥í•˜ì—¬ ë³¸ë¬¸ì„ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.</p>
                <div id="drill-status" style="margin-bottom: 1rem; font-size: 1.125rem; font-weight: 600; color: var(--secondary-color);"></div>

                <div id="drill-card" class="drill-card">
                    <p id="kr-prompt" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;"></p>
                    <p id="en-target-display" style="visibility: hidden; font-size: 1rem; color: var(--secondary-color); font-style: italic; margin-bottom: 1rem; padding: 0.5rem; background-color: var(--background-color); border-radius: 0.25rem;"></p>
                    <textarea id="user-input-drill" placeholder="ì—¬ê¸°ì— ì˜ì–´ ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”. (Shift+Enterë¡œ ì¤„ë°”ê¿ˆ, Enterë¡œ ì •ë‹µ í™•ì¸)" rows="4"></textarea>
                    
                    <div class="drill-buttons">
                        <button id="check-btn-drill" class="action-btn">ì •ë‹µ í™•ì¸</button>
                        <button id="hint-btn-drill" class="action-btn">íŒíŠ¸ ë³´ê¸°</button>
                    </div>
                    <p id="result-message-drill" style="margin-top: 1rem; font-size: 1.25rem; font-weight: 700;"></p>
                </div>
            `;

            $('check-btn-drill').addEventListener('click', checkDrillAnswer);
            $('hint-btn-drill').addEventListener('click', showDrillHint);
            $('user-input-drill').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    checkDrillAnswer();
                }
            });

            loadDrillItem(data[currentDrillIndex]);
        }

        /** í˜„ì¬ ìˆœì„œì˜ ë¬¸ì¥ì„ ë¡œë“œí•©ë‹ˆë‹¤. */
        function loadDrillItem(item) {
            const data = lessons[currentLessonId].data;
            $('drill-status').textContent = `ë¬¸ì¥ ${currentDrillIndex + 1} / ${data.length}`;
            $('kr-prompt').textContent = item.kr;
            $('en-target-display').textContent = item.en;
            $('en-target-display').style.visibility = 'hidden';
            $('en-target-display').style.color = 'var(--secondary-color)';
            $('user-input-drill').value = '';
            $('user-input-drill').disabled = false;
            $('result-message-drill').textContent = '';
            $('user-input-drill').focus();
        }

        /** ì‚¬ìš©ì ì…ë ¥ê³¼ ì •ë‹µì„ ë¹„êµí•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. */
        function checkDrillAnswer() {
            const userInput = $('user-input-drill').value.trim();
            const targetText = $('en-target-display').textContent.trim();
            const resultMsg = $('result-message-drill');
            const data = lessons[currentLessonId].data;
            
            // ë¹„êµ ì‹œ ëŒ€ì†Œë¬¸ì, êµ¬ë‘ì , ê³µë°± ë¬´ì‹œ (ë‹¨ì–´ ìˆœì„œë§Œ í™•ì¸)
            const normalize = (text) => text.toLowerCase().replace(/[\W_]+/g, '');

            // ì™„ë²½ ì¼ì¹˜ ê²€ì‚¬ (êµ¬ë‘ì , ëŒ€ì†Œë¬¸ìê¹Œì§€ëŠ” ì•„ë‹ˆë”ë¼ë„, ë‹¨ì–´ ìˆœì„œì™€ ê³µë°±ì€ ë§ì¶”ë„ë¡ ìœ ë„)
            if (userInput === targetText) {
                resultMsg.textContent = 'ì™„ë²½í•˜ê²Œ ì •ë‹µì…ë‹ˆë‹¤! ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.';
                resultMsg.className = 'text-success';
                $('user-input-drill').disabled = true;

                setTimeout(() => {
                    currentDrillIndex++;
                    if (currentDrillIndex < data.length) {
                        loadDrillItem(data[currentDrillIndex]);
                    } else {
                        resultMsg.textContent = `${lessons[currentLessonId].title}ì˜ ëª¨ë“  ë¬¸ì¥ì„ ì™„ë²½í•˜ê²Œ ì™¸ì› ìŠµë‹ˆë‹¤! ğŸ‰`;
                        resultMsg.className = 'text-success';
                        $('drill-card').style.display = 'none';
                        $('drill-status').textContent = '';
                    }
                }, 1500);

            } else if (normalize(userInput) === normalize(targetText)) {
                 resultMsg.textContent = 'ë‹¨ì–´ ìˆœì„œëŠ” ë§ì·„ìœ¼ë‚˜, êµ¬ë‘ì ì´ë‚˜ ëŒ€ì†Œë¬¸ìë¥¼ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•´ ë³´ì„¸ìš”.';
                 resultMsg.className = 'text-warning';
            } else {
                resultMsg.textContent = 'ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ í•œë²ˆ ì‹œë„í•´ ë³´ì„¸ìš”. (ë„ì–´ì“°ê¸°, êµ¬ë‘ì  í™•ì¸)';
                resultMsg.className = 'text-error';
            }
        }

        /** ì •ë‹µ íŒíŠ¸ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. */
        function showDrillHint() {
            const targetDisplay = $('en-target-display');
            targetDisplay.style.visibility = 'visible';
            targetDisplay.style.color = 'var(--error-color)';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            loadLesson(currentLessonId);
        };

    </script>
</body>
</html>
